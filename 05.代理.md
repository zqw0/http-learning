## 6 代理
&emsp;&#9728;Web代理服务器是网络的中间实体。代理位于客户端和服务端之间中间人的角色。在各端点之间来回传送HTTP报文。  
## 6.1 为什么使用代理
&emsp;&#9728;代理服务器可以改善安全性，提高性能，节省费用。代理服务器可以看到并接触到所有流过的HTTP流量，所以代理可以检测并修改流量。  
&#9728;儿童过滤器：小学在为教育站点提供无阻碍访问的同时，可以利用代理，阻止儿童访问成人内容。  
&#9728;文档访问控制：可以用代理服务器在大量Web服务器和Web资源之间实现统一的访问策略，创建审核跟踪机制。  
&#9728;安全防火墙：代理服务器可以充当防火墙来过滤网络的流量。  
&#9728;Web缓存：代理缓存维护了常用文档的本地副本，并将他们按需提供，以减少缓慢且昂贵的因特网通信。  
&#9728;反向代理：就是在服务器端的代理，比如ngx，当你访问百度的一个服务器时，反向代理会将的请求处理，并安排到一个压力不太大的服务器上。  
&#9728;内容路由：代理服务器可以作为内容路由器使用，根据因特网流量状况以及内容类型将请求导向特定的Web服务器。  
&#9728;转码器：代理服务器在将内容发送给客户端之前，可以修改内容的主体格式。  
&#9728;匿名者：匿名者代理会主动从HTTP报文中删除身份特性，从而提供高度的私密性。  
## 6.2 代理服务器的部署  
&#9728;出口代理：将代理固定在本地网络的出口点，以便控制本地网络与大型网络之间的流量。  
&#9728;访问入口代理：代理常被放在ISP访问点上，用以处理来自客户的聚合请求。ISP使用缓存代理来存储常用的文档副本，以提高用户的下载速度。  
&#9728;反向代理：代理通常会被部署在网络的边缘，在Web服务器之前，作为替代物。在那里他们可以处理所有传送给Web服务器的请求，并只在必要时，向Web服务器请求资源。  
&#9728;网络交换代理：可以将具有足够处理能力的代理放在网络之间的因特网对等交换点上，通过缓存来减轻因特网节点的拥塞。
## 6.3 代理是如何获取流量的
&#9728;修改客户端：很多Web客户端，都支持手工和自动的代理配置。如果将客户端配置为使用代理服务器，客户端就会将HTTP请求有意的直接发送给代理。  
&#9728;修改网络：网络基础设施可以通过若干种技术手段，在客户端不知道，或没有参与的情况下，拦截网络流量并将其导入代理。  
&#9728;修改DNS的命名空间：放在Web服务器之前的代理服务器，反向代理。会直接假扮Web服务器的名字和IP地址，这样，所有的请求就会发送给这些替代物，而不是服务器了。  
&#9728;修改Web服务器：也可以将某些Web服务器配置为客户端发送一条HTTP重定向命令，将客户端请求重定向到一个代理上去。

